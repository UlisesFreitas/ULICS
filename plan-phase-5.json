{
    "phase": 5,
    "title": "SFX Editor",
    "description": "Waveform designer with custom UI - Waveform type selector (sine/square/triangle/noise), ADSR envelope controls, frequency/duration inputs, preview playback.",
    "priority": "MEDIUM",
    "estimatedTime": "3-4 hours",
    "status": "pending",
    "philosophy": "Simple but powerful sound design. Visual waveform editing for immediate audio feedback and intuitive control.",
    "objectives": [
        "Design waveform type selector (sine, square, triangle, noise)",
        "Implement ADSR envelope controls (Attack, Decay, Sustain, Release)",
        "Add frequency slider (Hz) and duration input (seconds)",
        "Create waveform preview with visual representation",
        "Implement playback/preview functionality",
        "Save SFX to JSON format (sfx.json)",
        "Integrate with F4 toggle key"
    ],
    "tasks": [
        {
            "id": "5.1",
            "description": "Create SFXEditor class structure",
            "status": "pending",
            "files": [
                "src/ui/SFXEditor.h",
                "src/ui/SFXEditor.cpp"
            ],
            "estimatedTime": "30 min",
            "notes": "Basic class, SFX data structure, UI state"
        },
        {
            "id": "5.2",
            "description": "Add waveform type selector buttons",
            "status": "pending",
            "estimatedTime": "30 min",
            "notes": "4 buttons: Sine, Square, Triangle, Noise"
        },
        {
            "id": "5.3",
            "description": "Implement ADSR sliders",
            "status": "pending",
            "estimatedTime": "1 hour",
            "notes": "4 horizontal sliders rendered with rectfill, drag to adjust"
        },
        {
            "id": "5.4",
            "description": "Add frequency slider (20-20000 Hz)",
            "status": "pending",
            "estimatedTime": "30 min",
            "notes": "Logarithmic scale for better control, display Hz value"
        },
        {
            "id": "5.5",
            "description": "Add duration input (0.1-5.0 seconds)",
            "status": "pending",
            "estimatedTime": "15 min",
            "notes": "Numeric input or slider"
        },
        {
            "id": "5.6",
            "description": "Render waveform preview visualization",
            "status": "pending",
            "estimatedTime": "45 min",
            "notes": "Draw waveform shape with ADSR envelope overlay"
        },
        {
            "id": "5.7",
            "description": "Implement preview/play button",
            "status": "pending",
            "estimatedTime": "30 min",
            "notes": "Generate and play SFX using AudioManager"
        },
        {
            "id": "5.8",
            "description": "Add SFX slot navigation (0-63)",
            "status": "pending",
            "estimatedTime": "30 min",
            "notes": "64 SFX slots, prev/next buttons"
        },
        {
            "id": "5.9",
            "description": "Implement save to sfx.json",
            "status": "pending",
            "estimatedTime": "30 min",
            "notes": "Export all SFX data"
        },
        {
            "id": "5.10",
            "description": "Implement load from sfx.json",
            "status": "pending",
            "estimatedTime": "20 min",
            "notes": "Parse and populate editor"
        },
        {
            "id": "5.11",
            "description": "Integrate with Engine F4 toggle",
            "status": "pending",
            "estimatedTime": "15 min",
            "notes": "Wire into Engine mode switching"
        }
    ],
    "technical_specs": {
        "waveform_types": [
            "sine",
            "square",
            "triangle",
            "noise"
        ],
        "adsr_parameters": {
            "attack": "0.0-1.0 seconds",
            "decay": "0.0-1.0 seconds",
            "sustain": "0.0-1.0 (volume level)",
            "release": "0.0-1.0 seconds"
        },
        "frequency_range": "20-20000 Hz (logarithmic)",
        "duration_range": "0.1-5.0 seconds",
        "sfx_slots": 64,
        "file_format": "JSON (sfx.json)"
    },
    "ui_layout": {
        "waveform_selector": "Top, 4 toggle buttons",
        "adsr_sliders": "Middle left, 4 horizontal sliders with labels",
        "frequency_slider": "Middle right, vertical or horizontal slider",
        "duration_input": "Below frequency",
        "waveform_display": "Center, visual waveform with envelope",
        "preview_button": "Bottom center, PLAY/STOP",
        "slot_selector": "Top bar, SFX # and prev/next",
        "colors": {
            "background": "COLOR_DARK_BLUE",
            "slider_track": "COLOR_DARK_GRAY",
            "slider_thumb": "COLOR_YELLOW",
            "waveform": "COLOR_GREEN",
            "envelope": "COLOR_RED (overlay)"
        }
    },
    "sfx_data_format": {
        "format": "JSON",
        "structure": {
            "sfx": [
                {
                    "id": 0,
                    "waveform": "sine|square|triangle|noise",
                    "frequency": 440.0,
                    "duration": 1.0,
                    "attack": 0.1,
                    "decay": 0.2,
                    "sustain": 0.7,
                    "release": 0.3
                }
            ]
        }
    },
    "dependencies": [
        "AudioManager (src/audio/AudioManager.h)",
        "AestheticLayer (rendering)",
        "InputManager (mouse/keyboard)"
    ],
    "testing_checklist": [
        "Select different waveforms",
        "Adjust ADSR sliders",
        "Change frequency (verify Hz display)",
        "Set duration",
        "Preview SFX (hear audio)",
        "Navigate between SFX slots",
        "Save sfx.json",
        "Load sfx.json",
        "Toggle editor with F4",
        "Verify waveform visualization updates"
    ]
}