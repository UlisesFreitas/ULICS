{
    "phase": 7,
    "title": "Palette Editor",
    "description": "Color palette customization - 16-color grid editor, RGB sliders, preset buttons (PICO-8, TIC-80, DB16), live preview. Save to config.json.",
    "priority": "MEDIUM",
    "estimatedTime": "2-3 hours",
    "status": "pending",
    "philosophy": "Let users define their aesthetic. Presets for quick start, full RGB customization for unique look.",
    "objectives": [
        "Display 16-color palette grid",
        "Add RGB sliders for color editing (0-255)",
        "Include preset buttons (PICO-8, TIC-80, DB16, Gameboy, etc)",
        "Implement live preview showing colors in use",
        "Save palette to cartridge config.json",
        "Support hex color input (#RRGGBB)",
        "Integrate with F6 toggle key"
    ],
    "tasks": [
        {
            "id": "7.1",
            "description": "Create PaletteEditor class structure",
            "status": "pending",
            "files": [
                "src/ui/PaletteEditor.h",
                "src/ui/PaletteEditor.cpp"
            ],
            "estimatedTime": "20 min",
            "notes": "Basic class, palette data (16 colors), UI state"
        },
        {
            "id": "7.2",
            "description": "Render 16-color palette grid",
            "status": "pending",
            "estimatedTime": "30 min",
            "notes": "4x4 or 2x8 grid, click to select color"
        },
        {
            "id": "7.3",
            "description": "Implement RGB sliders (0-255)",
            "status": "pending",
            "estimatedTime": "45 min",
            "notes": "3 sliders (R,G,B), update selected color in real-time"
        },
        {
            "id": "7.4",
            "description": "Add hex color input field",
            "status": "pending",
            "estimatedTime": "30 min",
            "notes": "Text input for #RRGGBB, parse and apply"
        },
        {
            "id": "7.5",
            "description": "Create preset palette buttons",
            "status": "pending",
            "estimatedTime": "45 min",
            "notes": "PICO-8, TIC-80, DB16, Gameboy, NES - load full palette"
        },
        {
            "id": "7.6",
            "description": "Add live preview area",
            "status": "pending",
            "estimatedTime": "20 min",
            "notes": "Show sample graphics using current palette"
        },
        {
            "id": "7.7",
            "description": "Implement save to config.json",
            "status": "pending",
            "estimatedTime": "30 min",
            "notes": "Update palette section in cartridge config"
        },
        {
            "id": "7.8",
            "description": "Implement load from config.json",
            "status": "pending",
            "estimatedTime": "15 min",
            "notes": "Read palette on editor open"
        },
        {
            "id": "7.9",
            "description": "Add reset to default button",
            "status": "pending",
            "estimatedTime": "10 min",
            "notes": "Restore original ULICS 16-color palette"
        },
        {
            "id": "7.10",
            "description": "Integrate with Engine F6 toggle",
            "status": "pending",
            "estimatedTime": "15 min",
            "notes": "Wire into Engine mode switching"
        }
    ],
    "technical_specs": {
        "color_count": 16,
        "color_format": "RGB (0-255 per channel)",
        "hex_format": "#RRGGBB",
        "presets": [
            "PICO-8",
            "TIC-80",
            "DB16",
            "Gameboy",
            "NES",
            "CGA"
        ],
        "storage": "config.json (palette array)"
    },
    "ui_layout": {
        "palette_grid": "Left, 4x4 color grid with selection border",
        "rgb_sliders": "Right top, 3 horizontal sliders (R,G,B)",
        "hex_input": "Right middle, text field for #RRGGBB",
        "preset_buttons": "Bottom, row of preset palette buttons",
        "preview_area": "Top, shows sample UI with current palette",
        "current_color": "Large preview square of selected color",
        "colors": {
            "background": "COLOR_DARK_BLUE",
            "slider_track": "COLOR_DARK_GRAY",
            "slider_thumb": "COLOR_YELLOW",
            "selected_border": "COLOR_WHITE (2px)"
        }
    },
    "preset_palettes": {
        "PICO-8": [
            "#000000",
            "#1D2B53",
            "#7E2553",
            "#008751",
            "#AB5236",
            "#5F574F",
            "#C2C3C7",
            "#FFF1E8",
            "#FF004D",
            "#FFA300",
            "#FFEC27",
            "#00E436",
            "#29ADFF",
            "#83769C",
            "#FF77A8",
            "#FFCCAA"
        ],
        "TIC-80": [
            "#140C1C",
            "#442434",
            "#30346D",
            "#4E4A4E",
            "#854C30",
            "#346524",
            "#D04648",
            "#757161",
            "#597DCE",
            "#D27D2C",
            "#8595A1",
            "#6DAA2C",
            "#D2AA99",
            "#6DC2CA",
            "#DAD45E",
            "#DEEED6"
        ],
        "DB16": [
            "#140C1C",
            "#442434",
            "#30346D",
            "#4E4A4E",
            "#854C30",
            "#346524",
            "#D04648",
            "#757161",
            "#597DCE",
            "#D27D2C",
            "#8595A1",
            "#6DAA2C",
            "#D2AA99",
            "#6DC2CA",
            "#DAD45E",
            "#DEEED6"
        ]
    },
    "config_json_format": {
        "palette": [
            {
                "r": 0,
                "g": 0,
                "b": 0
            },
            {
                "r": 29,
                "g": 43,
                "b": 83
            }
        ]
    },
    "dependencies": [
        "UISystem (current palette management)",
        "CartridgeLoader (config.json read/write)",
        "AestheticLayer (rendering)",
        "InputManager (mouse/keyboard)"
    ],
    "testing_checklist": [
        "Select color from grid",
        "Adjust RGB sliders",
        "Enter hex color",
        "Load PICO-8 preset",
        "Load TIC-80 preset",
        "See live preview update",
        "Save to config.json",
        "Reload and verify palette persists",
        "Reset to default palette",
        "Toggle with F6",
        "Verify palette applies to entire engine"
    ]
}